# re:Inventã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

## æ¦‚è¦

AWS re:Invent 2025ã«é–¢ã™ã‚‹è³ªå•ã«ç­”ãˆã‚‹AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ»ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Vite + React + TypeScript
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: AWS Amplify Gen2
- **èªè¨¼**: Amazon Cognito (ãƒãƒãƒ¼ã‚¸ãƒ‰èªè¨¼ç”»é¢)
- **UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: AWS Amplify UI React + Tailwind CSS

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Strands Agents
- **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ **: Amazon Bedrock AgentCore Runtime
- **SDK**: `bedrock-agentcore` (BedrockAgentCoreApp) â€»FastAPIã§ã¯ãªã„
- **LLM**: Claude Haiku 4.5 (`us.anthropic.claude-haiku-4-5-20251001-v1:0`)
- **ã‚³ãƒ³ãƒ†ãƒŠ**: Docker (ARM64) â†’ ECR

### ãƒ„ãƒ¼ãƒ«ï¼ˆMCPï¼‰
1. **Tavilyå…¬å¼ãƒªãƒ¢ãƒ¼ãƒˆMCP** - Webæ¤œç´¢
2. **Strandså…¬å¼ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã€Œretrieveã€** - BedrockãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹æ¤œç´¢
3. **re-invent-2025-mcp** - re:Invent 2025ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«MCPï¼‰
   - PyPI: https://pypi.org/project/re-invent-2025-mcp/
   - GitHub: https://github.com/manu-mishra/reinvent-mcp-2025
   - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«: `pip install re-invent-2025-mcp` ã¾ãŸã¯ `uvx re-invent-2025-mcp`
   - æ©Ÿèƒ½: 1,843ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æ¤œç´¢ã€ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼æƒ…å ±ã€ãƒ¬ãƒ™ãƒ«/å½¢å¼ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

### ä¼šè©±å±¥æ­´
- **AgentCore Memory** + **Strands Session Manager**
  - çŸ­æœŸè¨˜æ†¶ï¼ˆSTMï¼‰: ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã®ä¼šè©±å±¥æ­´
  - ç”»é¢ãƒªãƒ­ãƒ¼ãƒ‰ã§å±¥æ­´ãƒªã‚»ãƒƒãƒˆï¼ˆsession_idã‚’æ–°è¦ç”Ÿæˆï¼‰

### ç›£è¦–
- **AgentCore Observability** â†’ CloudWatch GenAI Observability

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ãƒ¦ãƒ¼ã‚¶ãƒ¼                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AWS Amplify Gen2                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Vite + React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³                                â”‚   â”‚
â”‚  â”‚  - Cognitoèªè¨¼ (ãƒ¡ãƒ¼ãƒ«+ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰)                            â”‚   â”‚
â”‚  â”‚  - ãƒãƒ£ãƒƒãƒˆUI (ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ)                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ JWT Token (OAuth)
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Bedrock AgentCore Runtime                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Strands Agent (BedrockAgentCoreApp + Docker ARM64)          â”‚   â”‚
â”‚  â”‚  - Claude Haiku 4.5                                          â”‚   â”‚
â”‚  â”‚  - SSEã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                          â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚         â–¼                â–¼                â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Tavily    â”‚    â”‚ Bedrock   â”‚    â”‚re-invent  â”‚                  â”‚
â”‚  â”‚ MCP       â”‚    â”‚ KB MCP    â”‚    â”‚-2025-mcp  â”‚                  â”‚
â”‚  â”‚(ãƒªãƒ¢ãƒ¼ãƒˆ)  â”‚    â”‚(retrieve) â”‚    â”‚(ãƒ­ãƒ¼ã‚«ãƒ«)  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CloudWatch GenAI Observability                          â”‚
â”‚  - ãƒˆãƒ¬ãƒ¼ã‚¹ï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œãƒ•ãƒ­ãƒ¼ï¼‰                                 â”‚
â”‚  - ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã€ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ï¼‰                           â”‚
â”‚  - ãƒ­ã‚°                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒªãƒ¼ã‚¸ãƒ§ãƒ³

**ã™ã¹ã¦ us-west-2 (ã‚ªãƒ¬ã‚´ãƒ³) ã«çµ±ä¸€**

---

## èªè¨¼ãƒ•ãƒ­ãƒ¼

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒ—ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹
2. Cognito Managed Loginç”»é¢ã‚’è¡¨ç¤ºï¼ˆæ—¥æœ¬èªåŒ–æ¸ˆã¿ï¼‰
3. ãƒ¡ãƒ¼ãƒ«+ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—
4. JWTãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
5. AgentCore Runtimeã«JWTã§èªè¨¼ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

### Cognitoæ—¥æœ¬èªåŒ–

Managed Loginã¯ `lang=ja` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æ—¥æœ¬èªåŒ–å¯èƒ½ï¼š
```
https://<domain>/oauth2/authorize?lang=ja&response_type=code&client_id=<client_id>&redirect_uri=<url>
```

ãŸã ã—ã€Amplify UIã‚’ä½¿ã†å ´åˆã¯ `I18n.putVocabularies()` ã§ç¿»è¨³ã‚’è¨­å®šï¼ˆå‚è€ƒã‚³ãƒ¼ãƒ‰ã¨åŒæ§˜ï¼‰

---

## ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆSSEå½¢å¼ï¼‰
```python
async def stream_response():
    async for event in agent.stream_async(message):
        if event.type == "text":
            yield f"data: {json.dumps({'type': 'text', 'content': event.text})}\n\n"
        elif event.type == "tool_use":
            yield f"data: {json.dumps({'type': 'tool_use', 'tool': event.tool_name})}\n\n"
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- Server-Sent Events (SSE) ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å—ä¿¡
- ãƒ†ã‚­ã‚¹ãƒˆãƒãƒƒãƒ•ã‚¡ã§è“„ç©ãƒ»è¡¨ç¤º
- ãƒ„ãƒ¼ãƒ«ä½¿ç”¨æ™‚ã¯ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¡¨ç¤º â†’ å®Œäº†ã§ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯

---

## AgentCore Runtimeã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

### å¿…é ˆè¦ä»¶
- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: linux/arm64
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/invocations` (POST), `/ping` (GET)
- **ãƒãƒ¼ãƒˆ**: 8080

### èªè¨¼è¨­å®šï¼ˆé‡è¦ï¼ï¼‰
æ›´æ–°æ™‚ã« `--authorizer-configuration` ã‚’å¿…ãšæŒ‡å®šï¼š
```bash
aws bedrock-agentcore-control update-agent-runtime \
  --agent-runtime-id <runtime-id> \
  --agent-runtime-artifact containerConfiguration={containerUri=<ecr-uri>} \
  --authorizer-configuration '{
    "customJWTAuthorizer": {
      "discoveryUrl": "https://cognito-idp.us-west-2.amazonaws.com/<user-pool-id>/.well-known/openid-configuration",
      "allowedClients": ["<app-client-id>"]
    }
  }'
```

---

## Observabilityè¨­å®š

### å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
```
bedrock-agentcore[strands-agents]
strands-agents[otel]
aws-opentelemetry-distro
```

### trace_attributesè¨­å®š
```python
agent = Agent(
    model="anthropic.claude-haiku-4-5-20251001-v1:0",
    trace_attributes={
        "session.id": session_id,
        "actor.id": actor_id,
    }
)
```

### Dockerã§ã®èµ·å‹•
```dockerfile
CMD ["opentelemetry-instrument", "uv", "run", "python", "main.py"]
```

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
reinvent-concierge/
â”œâ”€â”€ frontend/                    # Amplify Gen2 + Vite + React
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx             # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªï¼ˆCognitoèªè¨¼çµ±åˆï¼‰
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ ChatInterface.tsx  # ãƒãƒ£ãƒƒãƒˆUIï¼ˆSSEã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼‰
â”‚   â”‚   â”œâ”€â”€ index.css           # Tailwind CSS v4
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts          # Tailwind v4 ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®š
â”œâ”€â”€ backend/                     # Strands Agent
â”‚   â”œâ”€â”€ main.py                 # BedrockAgentCoreAppã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ pyproject.toml          # Pythonä¾å­˜é–¢ä¿‚ï¼ˆuvç”¨ï¼‰
â”‚   â””â”€â”€ Dockerfile              # ARM64ãƒ“ãƒ«ãƒ‰
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ architecture.md         # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ credentials.md          # èªè¨¼æƒ…å ±ãƒ»ç’°å¢ƒå¤‰æ•°
â”‚   â”œâ”€â”€ deploy.md               # ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
â”‚   â””â”€â”€ strands-agentcore-guide.md  # æŠ€è¡“ã‚¬ã‚¤ãƒ‰
â”œâ”€â”€ reference/                   # å‚è€ƒã‚³ãƒ¼ãƒ‰
â””â”€â”€ .gitignore
```

---

## ç’°å¢ƒå¤‰æ•°ãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆAgentCoreç’°å¢ƒå¤‰æ•°ï¼‰
| å¤‰æ•°å | èª¬æ˜ | è¨­å®šå ´æ‰€ |
|--------|------|----------|
| TAVILY_API_KEY | Tavily APIã‚­ãƒ¼ | AgentCoreç’°å¢ƒå¤‰æ•° |
| KNOWLEDGE_BASE_ID | BedrockãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ | ã‚³ãƒ¼ãƒ‰å†…ã¹ãŸæ›¸ãOK |

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- `amplify_outputs.json` ã§è‡ªå‹•è¨­å®šï¼ˆCognitoç­‰ï¼‰

---

## å®Ÿè£…çŠ¶æ³

| ã‚¹ãƒ†ãƒƒãƒ— | çŠ¶æ…‹ | å‚™è€ƒ |
|----------|------|------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º | âœ… å®Œäº† | Vite + React + Tailwind CSS v4 + Amplify UI |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™º | âœ… å®Œäº† | Strands Agent + BedrockAgentCoreApp |
| GitHubä½œæˆ | âœ… å®Œäº† | https://github.com/minorun365/reinvent-concierge (private) |
| ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ä½œæˆ | âœ… å®Œäº† | ID: RT8AH7FKCS |
| AgentCore Memoryä½œæˆ | âœ… å®Œäº† | ID: reinvent2025-My6hDB5l3L |
| ECRãƒ—ãƒƒã‚·ãƒ¥ | ğŸ”² æœªå®Ÿæ–½ | `docs/deploy.md` Step 1 å‚ç…§ |
| AgentCore Runtimeä½œæˆ | ğŸ”² æœªå®Ÿæ–½ | `docs/deploy.md` Step 3 å‚ç…§ |
| Amplifyãƒ‡ãƒ—ãƒ­ã‚¤ | ğŸ”² æœªå®Ÿæ–½ | `docs/deploy.md` Step 4-6 å‚ç…§ |